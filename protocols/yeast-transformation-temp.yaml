roboliq: v1
description: |

  Yeast transformation with lithium acetate and plasmid DNA

  Input information:

  - N: number of transformations
  - X: amount of liquid plated (ul)

  Starting resources:

  - Cell culture tube
  - LiAc
  - Master mix
  - DNA to transform on a microtitier/PCR plate
  - YPD container
  - Slightly dried agar plates with an antibiotic
  - PVD filter plate
  - Waste plate (see Test waste plate)

  Protocol:

  - Pipet 350 ul into N wells on a PVD filter plate
  - Stack PVD filter plate on waste plate
  - Prepare a counter weight either by pipetting same volumes on identical plates or having a DW plate
  - Move the balance to the centrifuge
  - Move the stack to centrifuge
  - Run a suitable time and rpm (see Test centrifugation)
  - Move the stack out
  - Move the balance out
  - Move the filter plate on an empty site
  - Resuspend the pellet on the filter plate into 300 ul water (or max volume)
  - Move the plate on top of the stack
  - Fill the balance with water matching to the added volume
  - Move the stack to the centrifuge
  - Move the balance to the centrifuge
  - Run a suitable time and rpm
  - Move the stack out
  - Move the balance out
  - Move the filter plate on an empty site
  - Resuspend the cells with LiAc (is the volume high enough?)
  - Cover with a lid
  - Incubate 30 min in RT
  - Meanwhile, apply viscous master mix on a PCR plate (see Test pipetting the viscous liquids)
  - Add the DNA from the plate to the PCR plate
  - Uncover the filter plate
  - Add the incubated cells on the PCR plate with MM
  - Move the PCR plate in a thermocycler
  - Heat shock in a thermocycler for 30 mins
  - Meanwhile, pipet 0.2 ml of YPD on a deep well plate
  - Move the plate out of the thermocycler
  - Transfer each transformation (200 ul) on the deep well plate
  - Move the deep well plate into the
  - Move the deep well plate in the shaker incubator
  - Incubate the plate in 30C for 4h
  - Plate x ul of each culture on agar plates

config:
  evowareCompiler:
    checkBench: false

parameters:
  N:
    description: number of transformations
    value: 8
  F:
    description: first usable free well
    value: A02
  X:
    description: amount of liquid plated (ul)
    value: 200 ul
objects:
  ourlab:
    mario:
      site:
        # P4: null
        P4PCR: { type: "Site", evowareCarrier: "MP 3Pos Cooled 1 PCR", evowareGrid: 17, evowareSite: 1 }
  decontaminationTrough:
    description: Holds bleach
    type: Plate
    model: ourlab.model.troughModel_100ml
    location: ourlab.mario.site.R3
  tubeHolder50:
    description: Falcon tube(s) for starting cell culture
    type: Plate
    model: ourlab.model.tubeHolderModel_50ml
    location: ourlab.mario.site.T2
  cellCulture:
    description: Cells to be transformed
    type: Liquid
    wells: tubeHolder50(A01)
  tubeHolder15:
    description: 15ul tubes
    type: Plate
    model: ourlab.model.tubeHolderModel_15ml
    location: ourlab.mario.site.T1
  liAc:
    description: Lithium acetate
    type: Liquid
    wells: tubeHolder15(A01)
  masterMix:
    description: Master mix with PEG, SSDNA etc. mixed together
    type: Liquid
    wells: tubeHolder15(B01)
  dmso:
    description: DMSO
    type: Liquid
    wells: tubeHolder15(C01)
  #ypdTrough:
  #  description: YPD medium container
  #  type: Plate
  #  model: ourlab.model.troughModel_100ml
  #  location: ourlab.mario.site.R6
  #  contents: [Infinity ul, ypd]
  #waterTrough:
  #  description: Sterile water container
  #  type: Plate
  #  model: ourlab.model.troughModel_100ml
  #  location: ourlab.mario.site.R5
  #  contents: [Infinity ul, water]
  water:
    description: Sterile water
    type: Liquid
    wells: tubeHolder15(D01)
  ypd:
    description: YPD medium
    type: Liquid
    wells: tubeHolder15(E01)
  filterPlate:
    description: PVD filter plate up to 350 ul
    type: Plate
    model: ourlab.model.plateModel_96_round_filter_OV
    # location: ourlab.mario.site.HOTEL32_D1
    location: ourlab.mario.site.P5
  wastePlate:
    description: Single-well plate for waste
    type: Plate
    model: ourlab.model.plateModel_96_round_transparent_nunc
    location: ourlab.mario.site.HOTEL32_C1
  wastePlateLid:
    type: Lid
    model: ourlab.model.lidModel_standard
    location: wastePlate
  culturePlate:
    description: Empty deep well plate for cell cultures
    type: Plate
    model: ourlab.model.plateModel_96_round_transparent_nunc
    location: ourlab.mario.site.P2
  balancePlate:
    description: Empty deep well plate for balancing liquid
    type: Plate
    model: ourlab.model.plateModel_96_dwp
    location: ourlab.mario.site.P5
  dnaPlate:
    description: 96 well plate for DNA to be transformed
    type: Plate
    model: ourlab.model.plateModel_96_round_transparent_nunc
    location: ourlab.mario.site.HOTEL32_D2
  dnaPlateLid:
    type: Lid
    model: ourlab.model.lidModel_standard
    location: dnaPlate
  pcrPlate:
    description: 96 well PCR plate
    type: Plate
    model: ourlab.model.plateModel_96_pcr
    # location: ourlab.mario.site.HOTEL32_C2
    location: ourlab.mario.site.P4PCR

  design6:
    type: Design
    description: Transfer DMSO to cells and then cells from filter plate to PCR plate
    conditions:
      i*: $#N
      well=allocateWells:
        rows: 8
        columns: 12
        from: $#F
      group=calculate: '1 + floor((i - 1) / 4)' # Assign the same `group` value to every four wells
      volumeDmso: 14 ul
      volume: 185 ul

steps:
    35:
        description: Add DMSO to cells then transfer them from filter plate to PCR plate
        data: {source: design6}
        command: experiment.forEachGroup
        groupBy: group
        steps:
            1:
                command: pipetter.pipette
                program: Roboliq_Water_Air_1000
                sources: dmso
                destinationLabware: filterPlate
                destinations: $$well
                volumes: $volumeDmso
                clean: none
            2:
                command: pipetter.pipette
                program: Roboliq_Water_Air_1000
                sourceLabware: filterPlate
                sources: $$well
                destinationLabware: pcrPlate
                destinations: $$well
                volumes: $volume
                clean: none
                cleanEnd: decontaminate
